import{v as ce,j as oe,R as e,G as h,y as F,r as o,K as z,L as H,M as J,O as se,P as ie}from"./index.b5c20838.js";import{a as P,d as ee}from"./CheckCircle.f04c23ee.js";import{u as _,b as te,a as ue}from"./utils.8dea32ea.js";import{P as me,T as g}from"./Typography.df6ffa81.js";import{b as w}from"./TextField.e3ce599f.js";import{T as K,a as Y,b as G,c as T,d as Q}from"./TableRow.cab39bf8.js";import{T as t,I as D,A as pe}from"./TableCell.113bf022.js";import{l as Ee}from"./lodash.93eec54d.js";import{N as O,F as ye}from"./react-number-format.es.cff826ea.js";import{R as ge,a as de}from"./RadioGroup.022e5979.js";const fe=ce(oe.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete"),he=({formStuff:r,formValue:c,setFormValue:s,setShowForm:m})=>{const[l,p]=_(W);return e.createElement(me,{style:{padding:"4%",marginBottom:"4%"},elevation:3},e.createElement(h,{container:!0,spacing:3},e.createElement(h,{item:!0,xs:4},"Symbol: ",r.symbol),e.createElement(h,{item:!0,xs:8},"Name: ",r.name),e.createElement(h,{item:!0,xs:4},"Type: ",r.type),e.createElement(h,{item:!0,xs:8},"Region: ",r.region),e.createElement(h,{item:!0,xs:6},e.createElement(w,{label:"Quantity",type:"number",value:c.quantity,onChange:n=>{s({...c,quantity:n.target.value})}})),e.createElement(h,{item:!0,xs:6},e.createElement(w,{label:"Price",type:"number",value:c.price,onChange:n=>{s({...c,price:n.target.value})}})),e.createElement(h,{item:!0,xs:12},e.createElement(F,{fullWidth:!0,onClick:()=>{p([...l,{ticker:r.symbol,quantity:c.quantity,price:c.price}]),m(!1)}},"submit"))))},ve=({setErrorMessage:r})=>{const[c,s]=_(W),[m,l]=_(ne),[p]=_(ae);return o.exports.useEffect(()=>{async function n(y){return await P.get(`https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${y}&apikey=${p}`).then(E=>E.data["Global Quote"])}async function i(){if(c.length>0){let y=[];for(let E of c){let C=await n(E.ticker);if(C===void 0){r("Alpha Vantage only allows 5 requests every minute.");return}else E.high=parseFloat(C["03. high"]),E.low=parseFloat(C["04. low"]),E.open=parseFloat(C["02. open"]),E.pl=parseFloat(((C["02. open"]-parseFloat(E.price))/parseFloat(E.price)*100).toFixed(2));y.push(E)}s(y),r(void 0)}}i()},[m,c]),c.length===0?e.createElement(e.Fragment,null):e.createElement(K,{style:{margin:"0 0 3% 0"}},e.createElement(Y,null,e.createElement(G,null,e.createElement(T,null,e.createElement(t,null,"Ticker"),e.createElement(t,null,"Quantity"),e.createElement(t,null,"Cost"),e.createElement(t,null,"Open"),e.createElement(t,null,"High"),e.createElement(t,null,"Low"),e.createElement(t,null,"P/L (%)"),e.createElement(t,null,"Delete"))),e.createElement(Q,null,c.map((n,i)=>e.createElement(T,{key:i},e.createElement(t,null,n.ticker),e.createElement(t,null,n.quantity),e.createElement(t,null,n.price),e.createElement(t,null,n.open),e.createElement(t,null,n.high),e.createElement(t,null,n.low),e.createElement(t,{style:{color:n.pl>0?"green":"red"}},n.pl>0&&"+",n.pl),e.createElement(t,null,e.createElement(D,{onClick:()=>{let y=c;y.splice(i,1),s(y),l(!m)}},e.createElement(fe,null))))))))};var U={},Ce=J.exports;Object.defineProperty(U,"__esModule",{value:!0});var le=U.default=void 0,Se=Ce(z()),xe=H(),be=(0,Se.default)((0,xe.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");le=U.default=be;const we=({searchResults:r,setShowForm:c,setFormStuff:s,setShowSearchResults:m})=>e.createElement(K,{style:{margin:"0 0 3% 0"}},e.createElement(Y,null,e.createElement(G,null,e.createElement(T,null,e.createElement(t,null,"Symbol"),e.createElement(t,null,"Name"),e.createElement(t,null,"Type"),e.createElement(t,null,"Region"),e.createElement(t,null,"Correct?"))),e.createElement(Q,null,r.map((l,p)=>e.createElement(T,{key:p},e.createElement(t,null,l["1. symbol"]),e.createElement(t,null,l["2. name"]),e.createElement(t,null,l["3. type"]),e.createElement(t,null,l["4. region"]),e.createElement(t,null,e.createElement(D,{onClick:()=>{s({symbol:l["1. symbol"],name:l["2. name"],type:l["3. type"],region:l["4. region"]}),c(!0),m(!1)}},e.createElement(le,null))))))));function B(r){let c=r.reduce((s,m)=>s+=parseFloat(m.quantity)*parseFloat(m.price),0);return r.reduce((s,m)=>{let l=parseFloat(m.price),p=parseFloat(m.quantity),n=l*p/c,i=(m.open||l)-l;return Ee.exports.round(s+n*i,2)},0)}const ae=te("apiKey","111111111"),W=te("boring",[]),ne=ue(!1),ke=()=>{const[r,c]=_(ae),[s,m]=_(W),[l,p]=o.exports.useState(""),[n,i]=o.exports.useState(!1),[y,E]=o.exports.useState([]),[C,$]=o.exports.useState(!1),[R,L]=o.exports.useState(),[I,V]=o.exports.useState({price:"",quantity:""}),[S,k]=o.exports.useState(),[M,A]=_(ne);async function j(a){await P.get(`https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords=${a}&apikey=${r}`).then(u=>{E(u.data.bestMatches)})}return e.createElement("div",{style:{margin:"0 4% 10% 4%"}},e.createElement(g,{style:{color:"red"}},S!==void 0&&S),e.createElement(g,{variant:"h4",style:{margin:"3% 0 3% 0"}},"Boring"," ",e.createElement("span",{style:{color:B(s)>=0?"green":"red"}},B(s)>0&&"+",B(s),"%")),e.createElement(w,{label:"Alpha Vantage API key",size:"small",value:r,onChange:a=>c(a.target.value),style:{width:"60%",margin:"0 0 3% 0"}}),e.createElement(w,{label:"Add new boring equity",size:"small",value:l,onChange:a=>p(a.target.value),style:{width:"60%",margin:"0 0 3% 0"}}),e.createElement(F,{disabled:!l,onClick:()=>{j(l),i(!0)}},"search"),n&&l!==""&&l!=="bonds"&&e.createElement(we,{setShowForm:$,setShowSearchResults:i,setFormStuff:L,searchResults:y}),C&&l==="bonds"&&e.createElement(he,{formStuff:R,formValue:I,setFormValue:V,setShowForm:$}),e.createElement(ve,{setErrorMessage:k}),e.createElement(F,{onClick:()=>{A(!M)}},"refresh"))};var X={},De=J.exports;Object.defineProperty(X,"__esModule",{value:!0});var re=X.default=void 0,Fe=De(z()),_e=H(),Te=(0,Fe.default)((0,_e.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");re=X.default=Te;var Z={},qe=J.exports;Object.defineProperty(Z,"__esModule",{value:!0});var N=Z.default=void 0,Re=qe(z()),Ie=H(),Me=(0,Re.default)((0,Ie.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");N=Z.default=Me;const Pe=()=>{const[,r]=o.exports.useState([]),[c,s]=o.exports.useState([]),[m,l]=o.exports.useState(!0),[p]=o.exports.useState("SGD"),[n,i]=o.exports.useState([]),[y,E]=o.exports.useState(!1),[C,$]=o.exports.useState(),[R,L]=o.exports.useState(),[I,V]=o.exports.useState(),[S,k]=o.exports.useState({crypto:-1,quantity:-1,principal:-1});o.exports.useEffect(()=>{async function a(f,v){let d=0;return await P.get(`https://api.coinbase.com/v2/prices/${f}-${v}/sell`).then(b=>{d=parseFloat(b.data.data.amount)}),d}async function u(){let f=[];return await P.get("https://api.coinbase.com/v2/currencies").then(v=>{let d=[];for(let b of v.data.data)d.push(b.id);f=d,r(d)}),f}async function x(f){let v=[];await P.get("https://api.coinbase.com/v2/exchange-rates?currency=BTC").then(d=>{Object.keys(d.data.data.rates).map(b=>(f.includes(b)||v.push(b),"")),s(v)})}async function q(){let f=await u();x(f);let v=JSON.parse(localStorage.getItem("crypto")||"");if(v!=="")for(let d of v){let b=await a(d.name,p);d.pl=parseFloat(((b*d.value-d.principal)/d.principal*100).toFixed(2)),d.currentPrice=b}else v=[];i(v),localStorage.setItem("crypto",JSON.stringify(v)),l(!1)}setTimeout(()=>{q()},6e4),q()},[m,p]);function M(){let a=0,u=0;for(let x of n)u+=x.principal*x.pl/100,a+=x.principal;return parseFloat((u/a*100).toFixed(2))}function A(a){return a=a.toLocaleString(void 0,{maximumFractionDigits:2}),a}const j=()=>e.createElement("div",{style:{display:"inline-block",textAlign:"center"}},e.createElement(D,{onClick:()=>{k({crypto:-1,quantity:-1,principal:-1}),localStorage.setItem("crypto",JSON.stringify(n)),l(!0)}},e.createElement(ee,null)),e.createElement(D,{onClick:()=>{k({crypto:-1,quantity:-1,principal:-1})}},e.createElement(N,null)));return e.createElement("div",{style:{margin:"0 4% 0 4%"}},e.createElement(g,{variant:"h4",style:{margin:"0 0 1% 0"}},"Crypto ","  ",e.createElement("span",{style:{color:M()>0?"green":"red"}},M()>0?"+":"",M(),"%")),e.createElement(K,null,e.createElement(Y,null,e.createElement(G,null,e.createElement(T,null,e.createElement(t,null,e.createElement(g,null,"Currency (Current Price)")),e.createElement(t,{colSpan:S.quantity!==-1?3:1},e.createElement(g,null,"Quantity")),e.createElement(t,{colSpan:S.principal!==-1?3:1},e.createElement(g,null,"Principal")),e.createElement(t,null,e.createElement(g,null,"Current")),e.createElement(t,null,e.createElement(g,null,"Profit/Loss (%)")),e.createElement(t,null,e.createElement(g,null,"Delete")))),e.createElement(Q,null,!m&&n.map((a,u)=>e.createElement(T,null,e.createElement(t,null,`${a.name} (${p}${A(a.currentPrice)})`),e.createElement(t,{colSpan:S.quantity!==-1?3:1},S.quantity===u?e.createElement("div",{style:{width:"30vw"}},e.createElement(O,{customInput:w,value:a.value,onValueChange:x=>{let{floatValue:q}=x,f=n;f[u].value=q,i(f)}}),e.createElement(j,null)):e.createElement(g,{onClick:()=>{L(a.value),k({crypto:-1,quantity:u,principal:-1})}},a.value)),e.createElement(t,{colSpan:S.principal!==-1?3:1},S.principal===u?e.createElement("div",{style:{width:"30vw"}},e.createElement(O,{customInput:w,prefix:p,value:a.principal,onValueChange:x=>{let{floatValue:q}=x,f=n;f[u].principal=q,i(f)}}),e.createElement("span",{style:{display:"inline-block",textAlign:"center"}},e.createElement(D,{onClick:()=>{k({crypto:-1,quantity:-1,principal:-1}),localStorage.setItem("crypto",JSON.stringify(n)),l(!0)}},e.createElement(ee,null)),e.createElement(D,{onClick:()=>{k({crypto:-1,quantity:-1,principal:-1})}},e.createElement(N,null)))):e.createElement(g,{onClick:()=>{k({crypto:-1,principal:u,quantity:-1}),V(a.principal)}},p,A(a.principal))),e.createElement(t,null,e.createElement(g,null,p,(parseFloat(a.currentPrice)*parseFloat(a.value)).toLocaleString(void 0,{maximumFractionDigits:2}))),e.createElement(t,{style:{color:a.pl>0?"green":"red"}},e.createElement(g,null,a.pl>0&&"+",a.pl||"")),e.createElement(t,null,e.createElement(D,{onClick:()=>{n.splice(u,1),localStorage.setItem("crypto",JSON.stringify(n)),l(!0)}},e.createElement(re,null))))),y&&e.createElement(T,null,e.createElement(t,{style:{paddingRight:"5%"}},e.createElement(pe,{style:{padding:"3% 0 3% 0"},options:c,renderInput:a=>e.createElement(w,{...a,variant:"outlined",label:"Crypto",size:"small"}),onChange:(a,u)=>$(u)})),e.createElement(t,null,e.createElement(O,{style:{width:"25vw"},customInput:w,value:R,onValueChange:a=>{let{floatValue:u}=a;L(u||"")}})),e.createElement(t,null,e.createElement(O,{style:{width:"25vw"},customInput:w,prefix:p,value:I,onValueChange:a=>{let{floatValue:u}=a;V(u)}})))))),y?e.createElement("div",null,e.createElement(F,{onClick:()=>{C!==void 0&&I!==void 0&&R!==void 0&&(n.push({name:C,value:R,principal:I}),localStorage.setItem("crypto",JSON.stringify(n)),l(!0)),E(!1)}},"submit"),e.createElement(F,{onClick:()=>{E(!1)}},"cancel")):e.createElement(F,{onClick:()=>E(!0)},"+ add item"),e.createElement(F,{onClick:()=>l(!0)},"Refresh"),e.createElement("hr",null))},$e=Pe,Le=()=>{const r={lse_close:Date.UTC(new Date().getFullYear(),new Date().getMonth(),new Date().getDate(),15,30,0),lse_open:Date.UTC(new Date().getFullYear(),new Date().getMonth(),new Date().getDate(),7,0,0),nyse_open:Date.UTC(new Date().getFullYear(),new Date().getMonth(),new Date().getDate(),13,30,0),nyse_close:Date.UTC(new Date().getFullYear(),new Date().getMonth(),new Date().getDate(),20,0,0)};function c(i){i=new Date(i);let y=i-+new Date,E={};return y>0&&(E={days:Math.floor(y/(1e3*60*60*24)),hours:Math.floor(y/(1e3*60*60)%24),minutes:Math.floor(y/1e3/60%60),seconds:Math.floor(y/1e3%60)}),E}const[s,m]=o.exports.useState("lse_open"),[l,p]=o.exports.useState(c(r[s]));o.exports.useEffect(()=>{setTimeout(()=>{p(c(r[s]))},1e3)});function n(){return Object.keys(l).length===0?e.createElement(g,null,"The market is ",s.split("_")[1],"."):e.createElement(h,{container:!0,direction:"row",alignItems:"center",justifyContent:"center",spacing:1},e.createElement(h,{item:!0},e.createElement(g,null,l.hours,"H")),e.createElement(h,{item:!0},e.createElement(g,null,l.minutes,"M")),e.createElement(h,{item:!0},e.createElement(g,null,l.seconds,"S")))}return e.createElement("div",{style:{textAlign:"center",margin:"2% 0"}},e.createElement(ge,{value:s,onChange:i=>m(i.target.value),defaultValue:"lse_open"},e.createElement(h,{container:!0,direction:"row",justifyContent:"center"},[{value:"lse_open",name:"LSE Opening"},{value:"lse_close",name:"LSE Closing"},{value:"nyse_open",name:"NYSE Opening"},{value:"nyse_close",name:"NYSE Closing"}].map(i=>e.createElement(h,{item:!0,xs:6,sm:3},e.createElement(ye,{value:i.value,label:i.name,control:e.createElement(de,null)}))))),e.createElement("div",{style:{margin:"auto"}},n()))},Ve=Le,Ge=()=>{const r=se();return o.exports.useEffect(()=>{ie(r)},[r]),e.createElement("div",{style:{margin:"0 0% 0 0%"}},e.createElement(Ve,null),e.createElement(ke,null),e.createElement($e,null))};export{Ge as default};
