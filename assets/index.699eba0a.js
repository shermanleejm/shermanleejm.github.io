import{K as B,L as J,M as Y,r,R as e,y as b,G as x,O as U,P as K}from"./index.1eab7063.js";import{R as Q,a as W,B as X}from"./hooks.95c871b9.js";import{N as F,a as M,F as Z}from"./index.b3db0952.js";import{d as A}from"./CheckCircle.8ae0c235.js";import{T as c}from"./Typography.e1c77328.js";import{T as ee,c as te,d as ae,e as R,f as le}from"./utils.80cbc659.js";import{T as n,I as w,A as ne}from"./TableCell.bd2234fc.js";import{b as D}from"./TextField.6811b63f.js";import"./lodash.73629d66.js";var P={},re=Y.exports;Object.defineProperty(P,"__esModule",{value:!0});var z=P.default=void 0,ce=re(B()),oe=J(),ie=(0,ce.default)((0,oe.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");z=P.default=ie;var O={},se=Y.exports;Object.defineProperty(O,"__esModule",{value:!0});var q=O.default=void 0,ue=se(B()),me=J(),pe=(0,ue.default)((0,me.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");q=O.default=pe;const Ee=()=>{const[,y]=r.exports.useState([]),[_,g]=r.exports.useState([]),[T,m]=r.exports.useState(!0),[p]=r.exports.useState("SGD"),[i,s]=r.exports.useState([]),[d,v]=r.exports.useState(!1),[$,G]=r.exports.useState(),[I,L]=r.exports.useState(),[k,N]=r.exports.useState(),[C,h]=r.exports.useState({crypto:-1,quantity:-1,principal:-1});r.exports.useEffect(()=>{async function t(o,u){let l=0;return await M.get(`https://api.coinbase.com/v2/prices/${o}-${u}/sell`).then(f=>{l=parseFloat(f.data.data.amount)}),l}async function a(){let o=[];return await M.get("https://api.coinbase.com/v2/currencies").then(u=>{let l=[];for(let f of u.data.data)l.push(f.id);o=l,y(l)}),o}async function E(o){let u=[];await M.get("https://api.coinbase.com/v2/exchange-rates?currency=BTC").then(l=>{Object.keys(l.data.data.rates).map(f=>(o.includes(f)||u.push(f),"")),g(u)})}async function S(){let o=await a();E(o);let u=JSON.parse(localStorage.getItem("crypto")||"");if(u!=="")for(let l of u){let f=await t(l.name,p);l.pl=parseFloat(((f*l.value-l.principal)/l.principal*100).toFixed(2)),l.currentPrice=f}else u=[];s(u),localStorage.setItem("crypto",JSON.stringify(u)),m(!1)}setTimeout(()=>{S()},6e4),S()},[T,p]);function V(){let t=0,a=0;for(let E of i)a+=E.principal*E.pl/100,t+=E.principal;return parseFloat((a/t*100).toFixed(2))}function j(t){return t=t.toLocaleString(void 0,{maximumFractionDigits:2}),t}const H=()=>e.createElement("div",{style:{display:"inline-block",textAlign:"center"}},e.createElement(w,{onClick:()=>{h({crypto:-1,quantity:-1,principal:-1}),localStorage.setItem("crypto",JSON.stringify(i)),m(!0)}},e.createElement(A,null)),e.createElement(w,{onClick:()=>{h({crypto:-1,quantity:-1,principal:-1})}},e.createElement(q,null)));return e.createElement("div",{style:{margin:"0 4% 0 4%"}},e.createElement(c,{variant:"h4",style:{margin:"0 0 1% 0"}},"Crypto ","  ",e.createElement("span",{style:{color:V()>0?"green":"red"}},V()>0?"+":"",V(),"%")),e.createElement(ee,null,e.createElement(te,null,e.createElement(ae,null,e.createElement(R,null,e.createElement(n,null,e.createElement(c,null,"Currency (Current Price)")),e.createElement(n,{colSpan:C.quantity!==-1?3:1},e.createElement(c,null,"Quantity")),e.createElement(n,{colSpan:C.principal!==-1?3:1},e.createElement(c,null,"Principal")),e.createElement(n,null,e.createElement(c,null,"Current")),e.createElement(n,null,e.createElement(c,null,"Profit/Loss (%)")),e.createElement(n,null,e.createElement(c,null,"Delete")))),e.createElement(le,null,!T&&i.map((t,a)=>e.createElement(R,null,e.createElement(n,null,`${t.name} (${p}${j(t.currentPrice)})`),e.createElement(n,{colSpan:C.quantity!==-1?3:1},C.quantity===a?e.createElement("div",{style:{width:"30vw"}},e.createElement(F,{customInput:D,value:t.value,onValueChange:E=>{let{floatValue:S}=E,o=i;o[a].value=S,s(o)}}),e.createElement(H,null)):e.createElement(c,{onClick:()=>{L(t.value),h({crypto:-1,quantity:a,principal:-1})}},t.value)),e.createElement(n,{colSpan:C.principal!==-1?3:1},C.principal===a?e.createElement("div",{style:{width:"30vw"}},e.createElement(F,{customInput:D,prefix:p,value:t.principal,onValueChange:E=>{let{floatValue:S}=E,o=i;o[a].principal=S,s(o)}}),e.createElement("span",{style:{display:"inline-block",textAlign:"center"}},e.createElement(w,{onClick:()=>{h({crypto:-1,quantity:-1,principal:-1}),localStorage.setItem("crypto",JSON.stringify(i)),m(!0)}},e.createElement(A,null)),e.createElement(w,{onClick:()=>{h({crypto:-1,quantity:-1,principal:-1})}},e.createElement(q,null)))):e.createElement(c,{onClick:()=>{h({crypto:-1,principal:a,quantity:-1}),N(t.principal)}},p,j(t.principal))),e.createElement(n,null,e.createElement(c,null,p,(parseFloat(t.currentPrice)*parseFloat(t.value)).toLocaleString(void 0,{maximumFractionDigits:2}))),e.createElement(n,{style:{color:t.pl>0?"green":"red"}},e.createElement(c,null,t.pl>0&&"+",t.pl||"")),e.createElement(n,null,e.createElement(w,{onClick:()=>{i.splice(a,1),localStorage.setItem("crypto",JSON.stringify(i)),m(!0)}},e.createElement(z,null))))),d&&e.createElement(R,null,e.createElement(n,{style:{paddingRight:"5%"}},e.createElement(ne,{style:{padding:"3% 0 3% 0"},options:_,renderInput:t=>e.createElement(D,{...t,variant:"outlined",label:"Crypto",size:"small"}),onChange:(t,a)=>G(a)})),e.createElement(n,null,e.createElement(F,{style:{width:"25vw"},customInput:D,value:I,onValueChange:t=>{let{floatValue:a}=t;L(a||"")}})),e.createElement(n,null,e.createElement(F,{style:{width:"25vw"},customInput:D,prefix:p,value:k,onValueChange:t=>{let{floatValue:a}=t;N(a)}})))))),d?e.createElement("div",null,e.createElement(b,{onClick:()=>{$!==void 0&&k!==void 0&&I!==void 0&&(i.push({name:$,value:I,principal:k}),localStorage.setItem("crypto",JSON.stringify(i)),m(!0)),v(!1)}},"submit"),e.createElement(b,{onClick:()=>{v(!1)}},"cancel")):e.createElement(b,{onClick:()=>v(!0)},"+ add item"),e.createElement(b,{onClick:()=>m(!0)},"Refresh"),e.createElement("hr",null))},fe=Ee,de=()=>{const y={lse_close:Date.UTC(new Date().getFullYear(),new Date().getMonth(),new Date().getDate(),15,30,0),lse_open:Date.UTC(new Date().getFullYear(),new Date().getMonth(),new Date().getDate(),7,0,0),nyse_open:Date.UTC(new Date().getFullYear(),new Date().getMonth(),new Date().getDate(),13,30,0),nyse_close:Date.UTC(new Date().getFullYear(),new Date().getMonth(),new Date().getDate(),20,0,0)};function _(s){s=new Date(s);let d=s-+new Date,v={};return d>0&&(v={days:Math.floor(d/(1e3*60*60*24)),hours:Math.floor(d/(1e3*60*60)%24),minutes:Math.floor(d/1e3/60%60),seconds:Math.floor(d/1e3%60)}),v}const[g,T]=r.exports.useState("lse_open"),[m,p]=r.exports.useState(_(y[g]));r.exports.useEffect(()=>{setTimeout(()=>{p(_(y[g]))},1e3)});function i(){return Object.keys(m).length===0?e.createElement(c,null,"The market is ",g.split("_")[1],"."):e.createElement(x,{container:!0,direction:"row",alignItems:"center",justifyContent:"center",spacing:1},e.createElement(x,{item:!0},e.createElement(c,null,m.hours,"H")),e.createElement(x,{item:!0},e.createElement(c,null,m.minutes,"M")),e.createElement(x,{item:!0},e.createElement(c,null,m.seconds,"S")))}return e.createElement("div",{style:{textAlign:"center",margin:"2% 0"}},e.createElement(Q,{value:g,onChange:s=>T(s.target.value),defaultValue:"lse_open"},e.createElement(x,{container:!0,direction:"row",justifyContent:"center"},[{value:"lse_open",name:"LSE Opening"},{value:"lse_close",name:"LSE Closing"},{value:"nyse_open",name:"NYSE Opening"},{value:"nyse_close",name:"NYSE Closing"}].map(s=>e.createElement(x,{item:!0,xs:6,sm:3},e.createElement(Z,{value:s.value,label:s.name,control:e.createElement(W,null)}))))),e.createElement("div",{style:{margin:"auto"}},i()))},ye=de,Te=()=>{const y=U();return r.exports.useEffect(()=>{K(y)},[y]),e.createElement("div",{style:{margin:"0 0% 0 0%"}},e.createElement(ye,null),e.createElement(X,null),e.createElement(fe,null))};export{Te as default};
